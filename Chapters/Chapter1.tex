% Chapter 1

\chapter{Introducción general} % Main chapter title

\label{Chapter1} % For referencing the chapter elsewhere, use \ref{Chapter1}
\label{IntroGeneral}

Este capítulo introduce la problemática de la interconexión de instrumentos musicales electrónicos, se analizan algunas alternativas comerciales y se describe la motivación por la que se realizó este desarrollo. Finalmente, se presentan los objetivos y alcances del trabajo realizado.


%----------------------------------------------------------------------------------------

% Define some commands to keep the formatting separated from the content
\newcommand{\keyword}[1]{\textbf{#1}}
\newcommand{\tabhead}[1]{\textbf{#1}}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\file}[1]{\texttt{\bfseries#1}}
\newcommand{\option}[1]{\texttt{\itshape#1}}
\newcommand{\grados}{$^{\circ}$}

%----------------------------------------------------------------------------------------

\section{Problemática a resolver} \label{problematica}

Dentro de los estudios de grabación y los entornos de producción musical es frecuente la presencia de múltiples instrumentos musicales electrónicos, principalmente sintetizadores y procesadores de efectos.

Los equipos se comunican mediante el estándar MIDI (\textit{Musical Instrument Digital Interface}), que establece un mecanismo para la transferencia de información entre instrumentos, computadoras y otros dispositivos vinculados a la producción musical.

Para garantizar una correcta interoperabilidad, MIDI no solo define el protocolo (es decir, el formato de los mensajes), sino también la conexión física entre ellos mediante la especificación de los cables y conectores que deben usarse.

En la especificación original, la \textit{MIDI Manufacturers Association} (MMA, Asociación de Fabricantes MIDI) adoptó el conector DIN de 5 pines a 180° como interfaz física estandarizada para interconectar equipos \cite{mma:midi_spec}. En la figura \ref{fig:din5} se muestra a modo de ejemplo, el panel trasero de un sintetizador, donde se observan dos conectores etiquetados como MIDI OUT y MIDI IN.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.55\textwidth]{./Figures/din-connector.jpg}
	\caption{Ejemplo de cables y conectores DIN-5 pertenecientes al panel trasero de un sintetizador\protect\footnotemark.}
	\label{fig:din5}
\end{figure}

\footnotetext{Fotografía del autor.}

A partir de lo expuesto se infiere que la comunicación es unidireccional: se requiere de un conector de salida (MIDI OUT) para el envío de datos y otro de entrada (MIDI IN) para su recepción. El estándar, también, menciona un puerto adicional y opcional llamado MIDI THRU, que retransmite lo recibido en la entrada. Esto permite encadenar varios dispositivos entre sí, lo que se conoce como una topología en cadena o daisy chain. En la figura \ref{fig:daisy} se presenta un diagrama ilustrativo de este tipo de conexión.

\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{./Figures/daisy-chain.png}
	\caption{Diagrama de una topología daisy chain.}
	\label{fig:daisy}
\end{figure}

Al incrementar la cantidad de equipos se dificulta la interconexión entre ellos. La figura \ref{fig:ad-hoc} presenta un esquema de conexión entre dos controladores y cuatro sintetizadores.

\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{./Figures/ad-hoc.png}
	\caption{Diagrama de interconexión entre dos controladores y cuatro sintetizadores.}
	\label{fig:ad-hoc}
\end{figure}

Debido a que la salida MIDI THRU replica la señal recibida por MIDI IN, el secuenciador únicamente puede gestionar los sintetizadores 2, 3 y 4, mientras que el controlador queda limitado al sintetizador 1. Invertir esta estructura de control requiere modificar el cableado, una tarea poco conveniente desde el punto de vista operativo y susceptible a generar errores.

Una solución a esta problemática es la incorporación de un router MIDI, que dispone de múltiples entradas y salidas independientes. Al interconectar los equipos a través de él se obtiene una topología en estrella, con el router como nodo central. En la figura \ref{fig:centralizada} se muestran los mismos equipos de la figura \ref{fig:ad-hoc} conectados a través del router.

\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{./Figures/centralizada.png}
	\caption{Diagrama de interconexión entre dos controladores y cuatro sintetizadores conectados a través de un router central.}
	\label{fig:centralizada}
\end{figure}

El esquema presenta un cableado más claro y directo, lo que reduce la posibilidad de errores. Además, tanto el controlador como el secuenciador pueden controlar a cualquiera de los cuatro sintetizadores, lo que aporta mayor flexibilidad de uso.
%----------------------------------------------------------------------------------------

\section{Estado del arte} \label{estado-arte}

Actualmente existen diversas soluciones comerciales a nivel internacional. Para la selección de un equipo se valoran, entre otros aspectos, las siguientes características:
\begin{itemize}
	\item Cantidad de entradas y salidas.
	\item Capacidad de direccionamiento de las entradas.
	\item Filtrado de mensajes MIDI.
	\item Configuración mediante PC o \textit{stand-alone}.
\end{itemize}

En esta sección se presenta una lista general (pero no exhaustiva) de algunas de las alternativas más populares:
\begin{enumerate}
	\item Kenton THRU-12.
	\item MIDI Solutions Quadra Merge.
	\item Conductive Labs MRCC.
	\item iConnectivity mioXL.
\end{enumerate}

\subsection{Kenton THRU-12}
Desarrollado por la firma británica Kenton, este modelo posee una entrada que es replicada en sus doce salidas \cite{kenton:thru5}. Los equipos con este tipo de funcionalidad se conocen como thru boxes. En la figura \ref{fig:kenton} se muestra una fotografía del producto.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.5\textwidth]{./Figures/kenton.png}
	\caption{Kenton THRU-12\protect\footnotemark.}
	\label{fig:kenton}
\end{figure}

\footnotetext{Imagen tomada de \url{https://kentonuk.com/product/thru-12/}.}

\subsection{MIDI Solutions Quadra Merge}
Desarrollado por la firma canadiense MIDI Solutions, este modelo posee cuatro entradas que se combinan y son redirigidas a dos salidas \cite{midisolutions:quadra-thru}. Los equipos que fusionan varias entradas en una o más salidas son conocidos como merge boxes. En la figura \ref{fig:midi-solutions} se observa una fotografía del producto.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.5\textwidth]{./Figures/midi-solutions.jpg}
	\caption{MIDI Solutions Quadra Merge\protect\footnotemark.}
	\label{fig:midi-solutions}
\end{figure}

\footnotetext{Imagen tomada de \url{https://midisolutions.com/prodqmr.htm}.}

\subsection{Conductive Labs MRCC}
Esta solución de la firma estadounidense Conductive Labs posee once entradas y diecisiete salidas \cite{conductivelabs:mrcc}.  También ofrece opciones avanzadas de ruteo y filtrado de mensajes, configurables a través de una pantalla integrada. En la figura \ref{fig:mrcc} se muestra una fotografía del producto.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.8\textwidth]{./Figures/mrcc.png}
	\caption{Conductive Labs MRCC\protect\footnotemark.}
	\label{fig:mrcc}
\end{figure}

\footnotetext{Imagen tomada de \url{https://conductivelabs.com/mrcc/?v=c582dec943ff}.}

\subsection{iConnectivity mioXL}
Esta solución de la firma estadounidense iConnectivity posee ocho entradas y doce salidas \cite{iconnectivity:mioxl}. También soporta MIDI sobre Ethernet y USB. Al igual que el producto anterior, ofrece opciones avanzadas de ruteo y filtrado de mensajes configurables desde una aplicación de escritorio. En la figura \ref{fig:mioxl} se presenta una fotografía del producto.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.9\textwidth]{./Figures/mioxl.jpg}
	\caption{iConnectivity mioXL\protect\footnotemark.}
	\label{fig:mioxl}
\end{figure}

\footnotetext{Imagen tomada de \url{https://www.iconnectivity.com/mioxl}.}

\subsection{Comparativa de las alternativas}
\label{sec:comparativa-alternativas}

En la tabla \ref{tab:comparativa-modelos} se sintetizan las principales características de cada una de ellas, y además se incluye el costo aproximado de los productos en dólares estadounidenses.

\begin{table}[h]
	\centering
	\caption[Comparativa entre alternativas comerciales.]{Comparativa de las alternativas comerciales expuestas.}
	\label{tab:comparativa-modelos}
	\resizebox{\textwidth}{!}
	{
		\begin{tabular}{l c c c c c c}
			\toprule
			\textbf{Modelo} & \textbf{Entradas} & \textbf{Salidas} & \textbf{Ruteo} & \textbf{Filtrado} & \textbf{Configuración} & \textbf{Costo} \\
			\midrule
			Kenton THRU-12 & 1 & 12 & No & No & - & \$ 150 \\
			MIDI Solutions Quadra Merge & 4 & 2 & No & No & - & \$ 175 \\
			Conductive Labs MRCC & 11 & 17 & Sí & Sí & \textit{Stand-alone} & \$ 439 \\
			iConnectivity mioXL & 8 & 12 & Sí & Sí & Aplicación & \$ 500 \\
			\bottomrule
			\hline
		\end{tabular}
	}
\end{table}

Desde una perspectiva funcional, puede observarse que dispositivos como el THRU-12 y el Quadra Merge abordan de manera parcial la problemática descripta en la sección \ref{problematica}. El primero se limita a distribuir una única entrada hacia múltiples salidas. El segundo permite combinar varias entradas en un número reducido de salidas. En ambos casos se carece de mecanismos de filtrado y de opciones de configuración avanzadas.

Por su parte, productos como el MRCC y el mioXL incorporan un conjunto más amplio de funcionalidades. Estas prestaciones los convierten en equipos muy versátiles, adecuados para escenarios complejos en los que se requiere una gestión detallada del flujo de mensajes MIDI, aunque a la vez implican una mayor complejidad de uso y de configuración.

En síntesis, las alternativas revisadas tienden a ubicarse en dos extremos: por un lado, soluciones relativamente simples, orientadas a la distribución o combinación básica de señales sin capacidades de configuración; por otro lado, sistemas de alta complejidad que ofrecen un control exhaustivo del ruteo y del filtrado. Permanece abierto, por lo tanto, un espacio intermedio para dispositivos que ofrezcan varias entradas y salidas físicas junto con funciones de ruteo y filtrado configurables, pero con una interfaz de usuario más acotada y directa.

%----------------------------------------------------------------------------------------

\section{Motivación del trabajo} \label{motivacion}

En la subsección \ref{sec:comparativa-alternativas} se presentó una comparación entre algunas alternativas comerciales. Cada una de ellas ofrece distintos niveles de flexibilidad respecto a la cantidad de entradas y salidas, o a la capacidad de configuración. No obstante, su adquisición en el contexto nacional enfrenta barreras asociadas a costos finales, logística de importación y soporte posventa. En contraste, la oferta local se concentra en dispositivos de baja complejidad (principalmente thru boxes), adecuados para replicación de señales, pero insuficientes cuando se requiere ruteo selectivo entre entradas y salidas o filtrado por tipo de mensaje.

En consecuencia, se planteó el desafío de desarrollar una versión local de menor costo que:
\begin{itemize}
	\item Soporte múltiples entradas y salidas DIN.
	\item Soporte filtrado de mensajes.
	\item Permita configurar el direccionamiento entre entradas y salidas.
\end{itemize}

Finalmente, cabe destacar que pese a que la motivación de este trabajo fue personal, se realizaron encuestas en foros de entusiastas argentinos, con la intención de orientar el desarrollo de forma tal que el trabajo tenga potencial de venta en el futuro. Esto garantizaría poder cubrir un nicho que actualmente no está cubierto.

%----------------------------------------------------------------------------------------

\section{Objetivos y alcance}
\label{objetivos-alcance}

El objetivo general de este trabajo fue el desarrollo integral del prototipo de un router MIDI de cuatro entradas y ocho salidas, capaz de gestionar el flujo de mensajes entre ellas mediante funciones de ruteo y filtrado configurables.

Para alcanzar este objetivo general se definieron los siguientes objetivos específicos:
\begin{itemize}
	\item Diseñar y ensamblar el circuito electrónico del equipo.
	\item Desarrollar el firmware embebido que implemente las funciones de recepción, procesamiento, ruteo y filtrado de mensajes MIDI, así como el almacenamiento de configuraciones.
	\item Desarrollar una aplicación de escritorio que permita configurar el equipo, supervisar su estado de funcionamiento y gestionar las distintas configuraciones de ruteo y filtrado.
	\item Diseñar un gabinete que aloje las placas electrónicas y los conectores, adecuado para su instalación en entornos de estudio y preparado para su eventual montaje en un rack estándar.
	\item Verificar el funcionamiento del sistema mediante ensayos representativos, como pruebas de comunicación, de estabilidad y de latencia.
\end{itemize}

%----------------------------------------------------------------------------------------
